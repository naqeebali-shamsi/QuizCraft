# Team Management (Includes usage of AI)

This feature enhances team management capabilities by leveraging AI and various functionalities. The following key features are available:

- **Create a team with AI (artificial intelligence) generated team name**: The feature allows users to create a team with unique and creative names generated by AI. This is achieved by integrating a third-party API into the system.

- **Invite other users to join the team**: Users can send team invitations to other individuals, enabling them to join the team. The invitation process utilizes Pub/Sub, a messaging system, to efficiently deliver and handle invitations.

- **Accept or decline team invitations**: Users have the option to accept or decline team invitations. The system ensures prompt and reliable communication between team members by utilizing Pub/Sub to send acknowledgments.

- **View team statistics**: Team members can access comprehensive team statistics, including metrics such as games played, win/loss ratio, and total points earned. These statistics provide valuable insights into the team's performance and progress.

- **Manage team members**: Team administrators have the ability to effectively manage team members. They can promote members to administrative roles, remove members from the team, or choose to leave the team themselves. This functionality ensures seamless team administration and organization.

### Deployment

Update Environment Variables:

> Note: Before deploying the application, make sure to update the environment variables in the serverless.yml file. Set the values for SNS_TOPIC_ARN, OPENAI_API_KEY, and REGION according to your AWS SNS topic ARN, OpenAI API key, and AWS region, respectively. These environment variables are required for the proper functioning of the Team Management feature.

Install dependencies with:

```
npm install
```

and then deploy with:

```
serverless deploy
```

After running deploy, you should see output similar to:

```bash
Deploying aws-node-express-api-project to stage dev (us-east-1)

âœ” Service deployed to stack aws-node-express-api-project-dev (196s)

endpoint: ANY - https://xxxxxxxxxx.execute-api.us-east-1.amazonaws.com
functions:
  api: aws-node-express-api-project-dev-api (766 kB)
```

## APIs

The following APIs are available for interacting with the Team Management feature. Please use the provided Postman collection file to access these APIs.

> Note: To make API requests, import the provided Postman collection file `serverless-trivia-game.postman_collection.json` into Postman. The collection includes pre-configured requests for each API endpoint, making it easy to test and interact with the Team Management feature.

### Team APIs

- **Create a team**
  - `POST /teams/`: Create a new team.
  - Request Body: `{ "name": "Team Name" }`
  - Authentication: User authentication required.

- **Get all teams**
  - `GET /teams/`: Get a list of all teams.
  - Authentication: User authentication required.

- **Get team by ID**
  - `GET /teams/:id`: Get team details by ID.
  - Authentication: User authentication required.

- **Delete a team**
  - `DELETE /teams/:id`: Delete a team by ID.
  - Authentication: User authentication required.

### Team Name Generator API

- **Generate a team name using AI**
  - `GET /teams/generate/teamName`: Generate a team name using AI.
  - Authentication: User authentication required.

### Invitation APIs

- **Send team invitation**
  - `POST /teams/:teamId/invites`: Send an invitation to join a team.
  - Request Body: `{ "email": "user@example.com" }`
  - Authentication: User authentication required.

- **Accept team invitation**
  - `GET /teams/:teamId/invites/:memberId/accept`: Accept a team invitation.
  - Authentication: User authentication required.

- **Reject team invitation**
  - `GET /teams/:teamId/invites/:memberId/reject`: Reject a team invitation.
  - Authentication: User authentication required.

### Team Member APIs

- **Remove a team member**
  - `DELETE /teams/:teamId/members/:memberId`: Remove a member from a team.
  - Authentication: User authentication required.

- **Update team member**
  - `POST /teams/:teamId/members/:memberId`: Update details of a team member.
  - Request Body: `{ "role": "admin" }`
  - Authentication: User authentication required.

### Team Statistics APIs

- **Update team statistics**
  - `POST /teams/:teamId/stats`: Update team statistics.
  - Request Body: `{ "gamesPlayed": 10, "winLossRatio": 0.75, "totalPoints": 250 }`
  - Authentication: User authentication required.

- **Get team statistics**
  - `GET /teams/:teamId/stats`: Get team statistics.
  - Authentication: User authentication required.

### Notification API

- **Subscribe to email notifications**
  - `POST /teams/notification/subscribe`: Subscribe to email notifications for team updates.
  - Authentication: User authentication required.

- **Unsubscribe from email notifications**
  - `POST /teams/notification/unsubscribe`: Unsubscribe from email notifications.
  - Authentication: User authentication required.

### Local development

It is also possible to emulate API Gateway and Lambda locally by using `serverless-offline` plugin. In order to do that, execute the following command:

```bash
serverless plugin install -n serverless-offline
```

It will add the `serverless-offline` plugin to `devDependencies` in `package.json` file as well as will add it to `plugins` in `serverless.yml`.

After installation, you can start local emulation with:

```
serverless offline
```

To learn more about the capabilities of `serverless-offline`, please refer to its [GitHub repository](https://github.com/dherault/serverless-offline).
